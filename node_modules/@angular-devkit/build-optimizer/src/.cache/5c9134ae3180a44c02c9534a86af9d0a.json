{"remainingRequest":"D:\\work\\MouseFront\\node_modules\\@angular-devkit\\build-optimizer\\src\\build-optimizer\\webpack-loader.js??ref--3-1!D:\\work\\MouseFront\\node_modules\\@ngui\\auto-complete\\dist\\auto-complete.component.js","dependencies":[{"path":"D:\\work\\MouseFront\\node_modules\\@ngui\\auto-complete\\dist\\auto-complete.component.js","mtime":1528650269726},{"path":"D:\\work\\MouseFront\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1529322633677},{"path":"D:\\work\\MouseFront\\node_modules\\@angular-devkit\\build-optimizer\\src\\build-optimizer\\webpack-loader.js","mtime":1529322646960}],"contextDependencies":[],"result":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar core_1 = require(\"@angular/core\");\nvar auto_complete_1 = require(\"./auto-complete\");\n/**\n * show a selected date in monthly calendar\n * Each filteredList item has the following property in addition to data itself\n *   1. displayValue as string e.g. Allen Kim\n *   2. dataValue as any e.g.\n */\nvar NguiAutoCompleteComponent = /*@__PURE__*/ (function () {\n    /**\n     * constructor\n     */\n    function NguiAutoCompleteComponent(elementRef, autoComplete) {\n        var _this = this;\n        this.autoComplete = autoComplete;\n        /**\n         * public input properties\n         */\n        this.autocomplete = false;\n        this.minChars = 0;\n        this.acceptUserInput = true;\n        this.loadingText = \"Loading\";\n        this.loadingTemplate = null;\n        this.showInputTag = true;\n        this.showDropdownOnInit = false;\n        this.tabToSelect = true;\n        this.matchFormatted = false;\n        this.autoSelectFirstItem = false;\n        this.selectOnBlur = false;\n        this.valueSelected = new core_1.EventEmitter();\n        this.customSelected = new core_1.EventEmitter();\n        this.textEntered = new core_1.EventEmitter();\n        this.dropdownVisible = false;\n        this.isLoading = false;\n        this.filteredList = [];\n        this.minCharsEntered = false;\n        this.itemIndex = null;\n        this.reloadListInDelay = function (evt) {\n            var delayMs = _this.isSrcArr() ? 10 : 500;\n            var keyword = evt.target.value;\n            // executing after user stopped typing\n            _this.delay(function () { return _this.reloadList(keyword); }, delayMs);\n        };\n        this.inputElKeyHandler = function (evt) {\n            var totalNumItem = _this.filteredList.length;\n            switch (evt.keyCode) {\n                case 27:// ESC, hide auto complete\n                    _this.selectOne(undefined);\n                    break;\n                case 38:// UP, select the previous li el\n                    if (0 === totalNumItem) {\n                        return;\n                    }\n                    _this.itemIndex = (totalNumItem + _this.itemIndex - 1) % totalNumItem;\n                    _this.scrollToView(_this.itemIndex);\n                    break;\n                case 40:// DOWN, select the next li el or the first one\n                    if (0 === totalNumItem) {\n                        return;\n                    }\n                    _this.dropdownVisible = true;\n                    var sum = _this.itemIndex;\n                    sum = (_this.itemIndex === null) ? 0 : sum + 1;\n                    _this.itemIndex = (totalNumItem + sum) % totalNumItem;\n                    _this.scrollToView(_this.itemIndex);\n                    break;\n                case 13:// ENTER, choose it!!\n                    _this.selectOne(_this.filteredList[_this.itemIndex]);\n                    evt.preventDefault();\n                    break;\n                case 9:// TAB, choose if tab-to-select is enabled\n                    if (_this.tabToSelect) {\n                        _this.selectOne(_this.filteredList[_this.itemIndex]);\n                    }\n                    break;\n            }\n        };\n        this.delay = (function () {\n            var timer = 0;\n            return function (callback, ms) {\n                clearTimeout(timer);\n                timer = setTimeout(callback, ms);\n            };\n        })();\n        this.el = elementRef.nativeElement;\n    }\n    NguiAutoCompleteComponent.prototype.isSrcArr = function () {\n        return (this.source.constructor.name === \"Array\");\n    };\n    /**\n     * user enters into input el, shows list to select, then select one\n     */\n    NguiAutoCompleteComponent.prototype.ngOnInit = function () {\n        var _this = this;\n        this.autoComplete.source = this.source;\n        this.autoComplete.pathToData = this.pathToData;\n        this.autoComplete.listFormatter = this.listFormatter;\n        if (this.autoSelectFirstItem) {\n            this.itemIndex = 0;\n        }\n        setTimeout(function () {\n            if (_this.autoCompleteInput) {\n                _this.autoCompleteInput.nativeElement.focus();\n            }\n            if (_this.showDropdownOnInit) {\n                _this.showDropdownList({ target: { value: '' } });\n            }\n        });\n    };\n    NguiAutoCompleteComponent.prototype.showDropdownList = function (event) {\n        this.dropdownVisible = true;\n        this.reloadList(event.target.value);\n    };\n    NguiAutoCompleteComponent.prototype.hideDropdownList = function () {\n        this.dropdownVisible = false;\n    };\n    NguiAutoCompleteComponent.prototype.findItemFromSelectValue = function (selectText) {\n        var matchingItems = this.filteredList\n            .filter(function (item) { return ('' + item) === selectText; });\n        return matchingItems.length ? matchingItems[0] : null;\n    };\n    NguiAutoCompleteComponent.prototype.reloadList = function (keyword) {\n        var _this = this;\n        this.filteredList = [];\n        if (keyword.length < (this.minChars || 0)) {\n            this.minCharsEntered = false;\n            return;\n        }\n        else {\n            this.minCharsEntered = true;\n        }\n        if (this.isSrcArr()) {\n            this.isLoading = false;\n            this.filteredList = this.autoComplete.filter(this.source, keyword, this.matchFormatted);\n            if (this.maxNumList) {\n                this.filteredList = this.filteredList.slice(0, this.maxNumList);\n            }\n        }\n        else {\n            this.isLoading = true;\n            if (typeof this.source === \"function\") {\n                // custom function that returns observable\n                this.source(keyword).subscribe(function (resp) {\n                    if (_this.pathToData) {\n                        var paths = _this.pathToData.split(\".\");\n                        paths.forEach(function (prop) { return resp = resp[prop]; });\n                    }\n                    _this.filteredList = resp;\n                    if (_this.maxNumList) {\n                        _this.filteredList = _this.filteredList.slice(0, _this.maxNumList);\n                    }\n                }, function (error) { return null; }, function () { return _this.isLoading = false; } // complete\n                );\n            }\n            else {\n                // remote source\n                this.autoComplete.getRemoteData(keyword).subscribe(function (resp) {\n                    _this.filteredList = resp ? resp : [];\n                    if (_this.maxNumList) {\n                        _this.filteredList = _this.filteredList.slice(0, _this.maxNumList);\n                    }\n                }, function (error) { return null; }, function () { return _this.isLoading = false; } // complete\n                );\n            }\n        }\n    };\n    NguiAutoCompleteComponent.prototype.selectOne = function (data) {\n        if (!!data || data === '') {\n            this.valueSelected.emit(data);\n        }\n        else {\n            this.customSelected.emit(this.keyword);\n        }\n    };\n    ;\n    NguiAutoCompleteComponent.prototype.enterText = function (data) {\n        this.textEntered.emit(data);\n    };\n    NguiAutoCompleteComponent.prototype.blurHandler = function (evt) {\n        if (this.selectOnBlur) {\n            this.selectOne(this.filteredList[this.itemIndex]);\n        }\n        this.hideDropdownList();\n    };\n    ;\n    NguiAutoCompleteComponent.prototype.scrollToView = function (index) {\n        var container = this.autoCompleteContainer.nativeElement;\n        var ul = container.querySelector('ul');\n        var li = ul.querySelector('li'); //just sample the first li to get height\n        var liHeight = li.offsetHeight;\n        var scrollTop = ul.scrollTop;\n        var viewport = scrollTop + ul.offsetHeight;\n        var scrollOffset = liHeight * index;\n        if (scrollOffset < scrollTop || (scrollOffset + liHeight) > viewport) {\n            ul.scrollTop = scrollOffset;\n        }\n    };\n    Object.defineProperty(NguiAutoCompleteComponent.prototype, \"emptyList\", {\n        get: function () {\n            return !(this.isLoading ||\n                (this.minCharsEntered && !this.isLoading && !this.filteredList.length) ||\n                (this.filteredList.length));\n        },\n        enumerable: true,\n        configurable: true\n    });\n    NguiAutoCompleteComponent.decorators = [\n        { type: core_1.Component, args: [{\n                    selector: \"ngui-auto-complete\",\n                    template: \"\\n  <div #autoCompleteContainer class=\\\"ngui-auto-complete\\\">\\n    <!-- keyword input -->\\n    <input *ngIf=\\\"showInputTag\\\"\\n           #autoCompleteInput class=\\\"keyword\\\"\\n           [attr.autocomplete]=\\\"autocomplete ? 'null' : 'off'\\\"\\n           placeholder=\\\"{{placeholder}}\\\"\\n           (focus)=\\\"showDropdownList($event)\\\"\\n           (blur)=\\\"blurHandler($event)\\\"\\n           (keydown)=\\\"inputElKeyHandler($event)\\\"\\n           (input)=\\\"reloadListInDelay($event)\\\"\\n           [(ngModel)]=\\\"keyword\\\" />\\n\\n    <!-- dropdown that user can select -->\\n    <ul *ngIf=\\\"dropdownVisible\\\" [class.empty]=\\\"emptyList\\\">\\n      <li *ngIf=\\\"isLoading && loadingTemplate\\\" class=\\\"loading\\\" [innerHTML]=\\\"loadingTemplate\\\"></li>\\n      <li *ngIf=\\\"isLoading && !loadingTemplate\\\" class=\\\"loading\\\">{{loadingText}}</li>\\n      <li *ngIf=\\\"minCharsEntered && !isLoading && !filteredList.length\\\"\\n           (mousedown)=\\\"selectOne('')\\\"\\n           class=\\\"no-match-found\\\">{{noMatchFoundText || 'No Result Found'}}</li>\\n      <li *ngIf=\\\"blankOptionText && filteredList.length\\\"\\n          (mousedown)=\\\"selectOne('')\\\"\\n          class=\\\"blank-item\\\">{{blankOptionText}}</li>\\n      <li class=\\\"item\\\"\\n          *ngFor=\\\"let item of filteredList; let i=index\\\"\\n          (mousedown)=\\\"selectOne(item)\\\"\\n          [ngClass]=\\\"{selected: i === itemIndex}\\\"\\n          [innerHtml]=\\\"autoComplete.getFormattedListItem(item)\\\">\\n      </li>\\n    </ul>\\n\\n  </div>\",\n                    providers: [auto_complete_1.NguiAutoComplete],\n                    styles: [\"\\n  @keyframes slideDown {\\n    0% {\\n      transform:  translateY(-10px);\\n    }\\n    100% {\\n      transform: translateY(0px);\\n    }\\n  }\\n  .ngui-auto-complete {\\n    background-color: transparent;\\n  }\\n  .ngui-auto-complete > input {\\n    outline: none;\\n    border: 0;\\n    padding: 2px; \\n    box-sizing: border-box;\\n    background-clip: content-box;\\n  }\\n\\n  .ngui-auto-complete > ul {\\n    background-color: #fff;\\n    margin: 0;\\n    width : 100%;\\n    overflow-y: auto;\\n    list-style-type: none;\\n    padding: 0;\\n    border: 1px solid #ccc;\\n    box-sizing: border-box;\\n    animation: slideDown 0.1s;\\n  }\\n  .ngui-auto-complete > ul.empty {\\n    display: none;\\n  }\\n\\n  .ngui-auto-complete > ul li {\\n    padding: 2px 5px;\\n    border-bottom: 1px solid #eee;\\n  }\\n\\n  .ngui-auto-complete > ul li.selected {\\n    background-color: #ccc;\\n  }\\n\\n  .ngui-auto-complete > ul li:last-child {\\n    border-bottom: none;\\n  }\\n\\n  .ngui-auto-complete > ul li:hover {\\n    background-color: #ccc;\\n  }\"\n                    ],\n                    encapsulation: core_1.ViewEncapsulation.None\n                },] },\n    ];\n    NguiAutoCompleteComponent.propDecorators = {\n        'autocomplete': [{ type: core_1.Input, args: [\"autocomplete\",] },],\n        'listFormatter': [{ type: core_1.Input, args: [\"list-formatter\",] },],\n        'source': [{ type: core_1.Input, args: [\"source\",] },],\n        'pathToData': [{ type: core_1.Input, args: [\"path-to-data\",] },],\n        'minChars': [{ type: core_1.Input, args: [\"min-chars\",] },],\n        'placeholder': [{ type: core_1.Input, args: [\"placeholder\",] },],\n        'blankOptionText': [{ type: core_1.Input, args: [\"blank-option-text\",] },],\n        'noMatchFoundText': [{ type: core_1.Input, args: [\"no-match-found-text\",] },],\n        'acceptUserInput': [{ type: core_1.Input, args: [\"accept-user-input\",] },],\n        'loadingText': [{ type: core_1.Input, args: [\"loading-text\",] },],\n        'loadingTemplate': [{ type: core_1.Input, args: [\"loading-template\",] },],\n        'maxNumList': [{ type: core_1.Input, args: [\"max-num-list\",] },],\n        'showInputTag': [{ type: core_1.Input, args: [\"show-input-tag\",] },],\n        'showDropdownOnInit': [{ type: core_1.Input, args: [\"show-dropdown-on-init\",] },],\n        'tabToSelect': [{ type: core_1.Input, args: [\"tab-to-select\",] },],\n        'matchFormatted': [{ type: core_1.Input, args: [\"match-formatted\",] },],\n        'autoSelectFirstItem': [{ type: core_1.Input, args: [\"auto-select-first-item\",] },],\n        'selectOnBlur': [{ type: core_1.Input, args: [\"select-on-blur\",] },],\n        'valueSelected': [{ type: core_1.Output },],\n        'customSelected': [{ type: core_1.Output },],\n        'textEntered': [{ type: core_1.Output },],\n        'autoCompleteInput': [{ type: core_1.ViewChild, args: ['autoCompleteInput',] },],\n        'autoCompleteContainer': [{ type: core_1.ViewChild, args: ['autoCompleteContainer',] },],\n    };\n    return NguiAutoCompleteComponent;\n}());\nexports.NguiAutoCompleteComponent = NguiAutoCompleteComponent;\n",null]}